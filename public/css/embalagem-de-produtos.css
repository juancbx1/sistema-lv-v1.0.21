/* public/css/embalagem-de-produtos.css */

/*------------------------------------*\
    #VARIÁVEIS GLOBAIS (EP = Embalagem Produtos)
\*------------------------------------*/
:root {
    --ep-cor-fundo-pagina: #f4f6f8;
    --ep-cor-texto-principal: #333;
    --ep-cor-azul-escuro: #2c3e50;     /* Títulos, texto importante */
    --ep-cor-azul-primario: #3498db;   /* Botões primários, links */
    --ep-cor-azul-hover: #2980b9;
    --ep-cor-azul-subtitulo: #5a7c9b;  /* Subtítulos, info */
    --ep-cor-verde-sucesso: #27ae60;   /* Sucesso, botões de salvar */
    --ep-cor-verde-hover: #229954;
    --ep-cor-vermelho-perigo: #e74c3c; /* Erro, botões de excluir */
    --ep-cor-vermelho-hover: #c0392b;
    --ep-cor-laranja-aviso: #f39c12;   /* Avisos */
    --ep-cor-amarelo-destaque: #f1c40f;/* Destaques de quantidade */
    --ep-cor-cinza-texto-secundario: #7f8c8d; /* Labels, texto menos importante */
    --ep-cor-cinza-borda: #dcdfe4;         /* Bordas */
    --ep-cor-cinza-borda-card: #dcdfe4;
    --ep-cor-cinza-fundo-input: #f8f9fa;   /* Fundo de inputs */
    --ep-cor-cinza-fundo-alternativo: #f9fbfd; /* Para fundos de seção leves */
    --ep-cor-branco: #ffffff;
    --ep-cor-branco-forte: #f5f5f5;
    --ep-cor-status-pronto: var(--ep-cor-cinza-borda-card); 
    --ep-cor-fundo-botoes-kits:var(--ep-cor-branco-forte);
    --ep-sombra-padrao: 0 4px 12px rgba(0, 0, 0, 0.08);
    --ep-sombra-hover: 0 6px 16px rgba(0, 0, 0, 0.12);
    --ep-sombra-interna: inset 0 2px 4px rgba(0, 0, 0, 0.05);

    --ep-raio-borda-container: 10px;
    --ep-raio-borda-card: 8px;
    --ep-raio-borda-input: 6px;
    --ep-raio-borda-botao: 6px;

     --ep-cor-label-dado: #6c757d;
    --ep-cor-valor-dado: var(--ep-cor-azul-primario); /* Cor padrão para valores nos dados */

    --ep-font-principal: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

/*------------------------------------*\
    #RESET BÁSICO E ESTILOS DE BODY
\*------------------------------------*/
*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html {
    font-size: 16px;
}

body {
    font-family: var(--ep-font-principal);
    background-color: var(--ep-cor-fundo-pagina);
    color: var(--ep-cor-texto-principal);
    line-height: 1.6;
    visibility: hidden; 
    margin-left: 250px; 
    transition: margin-left 0.3s ease;
}




@media (max-width: 1024px) {
    body {
        margin-left: 0;
    }
}

/*------------------------------------*\
    #LAYOUT PRINCIPAL DA PÁGINA
\*------------------------------------*/
.container-ep{
    padding: 25px;
}

.ep-container-principal {
    padding: 20px;
    max-width: 1400px;
    margin-left: auto;
    margin-right: auto;
}

.ep-card {
    background-color: var(--ep-cor-branco);
    border-radius: var(--ep-raio-borda-container);
    padding: 25px;
    box-shadow: var(--ep-sombra-padrao);
    margin-bottom: 30px;
}

.ep-titulo-secao {
    font-size: 1.4rem;
    color: var(--ep-cor-azul-escuro);
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid #eaeaea;
    font-weight: 500;
}

.ep-descricao-secao {
    font-size: 0.95rem;
    color: var(--ep-cor-cinza-texto-secundario);
    margin-bottom: 20px;
    line-height: 1.5;
    text-align: center; 
    font-style: italic;
}

.ep-subtitulo {
    font-size: 1.1rem;
    color: var(--ep-cor-azul-subtitulo);
    margin-bottom: 10px;
    font-weight: 500;
}

.ep-section-description{
    text-align: center; 
    font-style: italic; 
    color: var(--ep-cor-cinza-texto);
}

/* Estilo para o botão da aba "Voltar para Arremate" */
.ep-tab-btn.ep-btn-perigo-outline {
    border: none;
    border-bottom: 2px solid transparent; /* Mantém o comportamento das abas */
    background-color: transparent;
    color: var(--ep-cor-vermelho-perigo);
    font-weight: 600;
}
.ep-tab-btn.ep-btn-perigo-outline.active {
    border-bottom-color: var(--ep-cor-vermelho-perigo);
}
.ep-tab-btn.ep-btn-perigo-outline:hover:not(.active) {
    color: var(--ep-cor-vermelho-hover);
}

/*------------------------------------*\
    #ELEMENTOS DE FORMULÁRIO
\*------------------------------------*/
.ep-form-estilizado .ep-form-grupo {
    margin-bottom: 20px;
}
.ep-form-estilizado label {
    display: block;
    font-size: 0.9rem;
    color: var(--ep-cor-cinza-texto-secundario);
    margin-bottom: 8px;
    font-weight: 500;
}

.ep-input-embalar-produto{
    width: 100%;
    padding: 10px 14px;
    font-size: 0.95rem;
    border: 1px solid var(--ep-cor-cinza-borda);
    border-radius: var(--ep-raio-borda-input);
    background-color: var(--ep-cor-cinza-fundo-input);
    color: var(--ep-cor-texto-principal);
    transition: border-color 0.2s ease, box-shadow 0.2s ease;

}

.ep-titulo-variacao-prod{
    font-size: 1.2rem;

}
.ep-subtitulo-secao {
    font-size: 1.2rem; 
    text-align:center;
}



.ep-input,
.ep-select,
.ep-textarea {
    width: 100%;
    padding: 10px 14px;
    font-size: 0.95rem;
    border: 1px solid var(--ep-cor-cinza-borda);
    border-radius: var(--ep-raio-borda-input);
    background-color: var(--ep-cor-cinza-fundo-input);
    color: var(--ep-cor-texto-principal);
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}
.ep-input:focus,
.ep-select:focus,
.ep-textarea:focus {
    outline: none;
    border-color: var(--ep-cor-azul-primario);
    box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2); /* Corrigido para usar RGB da variável */
}
.ep-input[readonly], .ep-input:disabled,
.ep-select:disabled, .ep-textarea:disabled {
    background-color: #e9ecef;
    cursor: not-allowed;
    opacity: 0.8;
}

/* Botões */
.ep-btn {
    padding: 10px 20px;
    font-size: 0.95rem;
    font-weight: 500;
    border-radius: var(--ep-raio-borda-botao);
    border: none; /* Removido '1px solid transparent' para que as cores de fundo funcionem melhor */
    cursor: pointer;
    transition: background-color 0.2s ease, transform 0.15s ease, box-shadow 0.15s ease;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background-color: var(--ep-cor-azul-primario);
    gap: 8px;
    text-decoration: none;
    color: var(--ep-cor-branco); /* Cor de texto padrão para botões com fundo */
}
.ep-btn i {
    font-size: 1em; 
}
.ep-btn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 3px 10px rgba(0,0,0,0.12);
}
.ep-btn:disabled {
    opacity: 0.65;
    cursor: not-allowed;
}

/* ****** ADICIONADO BACKGROUNDS PARA BOTÕES ****** */
.ep-btn-primario { background-color: var(--ep-cor-azul-primario); }
.ep-btn-primario:hover:not(:disabled) { background-color: var(--ep-cor-azul-hover); }

.ep-btn-sucesso { background-color: var(--ep-cor-verde-sucesso); }
.ep-btn-sucesso:hover:not(:disabled) { background-color: var(--ep-cor-verde-hover); }

.ep-btn-perigo { background-color: var(--ep-cor-vermelho-perigo); }
.ep-btn-perigo:hover:not(:disabled) { background-color: var(--ep-cor-vermelho-hover); }

.ep-btn-secundario {
    background-color: var(--ep-cor-cinza-texto-secundario);
    color: var(--ep-cor-branco);
}
.ep-btn-secundario:hover:not(:disabled) { background-color: #6a7879; } /* Um cinza mais escuro */

.ep-btn-aviso {
    background-color: var(--ep-cor-laranja-aviso);
    color: var(--ep-cor-branco);
}
.ep-btn-aviso:hover:not(:disabled) { background-color: #d68910; } /* Laranja mais escuro */

.ep-btn-link { /* Botão com aparência de link, se necessário */
    background-color: transparent;
    color: var(--ep-cor-azul-primario);
    padding-left: 5px;
    padding-right: 5px;
    box-shadow: none;
}
.ep-btn-link:hover:not(:disabled) {
    color: var(--ep-cor-azul-hover);
    text-decoration: underline;
    transform: none; /* Sem efeito de levantar */
}
/* ****** FIM ADIÇÃO BACKGROUNDS ****** */


.ep-form-botoes {
    display: flex;
    gap: 12px;
    margin-top: 20px;
    justify-content: flex-start;
}

/*------------------------------------*\
    #FILTROS (Busca)
\*------------------------------------*/
.ep-filtros-container {
    margin-bottom: 20px;
    padding: 15px; /* Adicionado padding para o card de filtro */
    background-color: var(--ep-cor-cinza-fundo-alternativo); /* Fundo sutil */
    border-radius: var(--ep-raio-borda-card);
    border: 1px solid var(--ep-cor-cinza-borda);
}
.ep-input-busca { 
    padding: 10px 14px;
    border: 1px solid var(--ep-cor-cinza-borda);
    border-radius: var(--ep-raio-borda-input);
    font-size: 1rem;
    margin: 0 auto; /* Centraliza o input de busca */
    display: block;
}

/* Estilo para o CONTAINER da grade de cards */
.ep-embalagem-card-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    min-height: 200px;
    position: relative; /* Garante o posicionamento de overlays futuros */
}

/* Estilo para a section principal da view de detalhe */
#embalarDetalheView.ep-card { /* Adiciona especificidade se necessário */
    position: relative; /* Necessário para o posicionamento absoluto do botão fechar */
    padding-top: 25px;  /* Deixa espaço no topo se o botão fechar não estiver no header */
    min-height: 400px; /* Um valor mínimo razoável */
    overflow: visible !important;    /* OU visible. 'auto' mostrará scrollbars se necessário */
}

/* NOVO CABEÇALHO DA VIEW DE DETALHE (Baseado no .movimento-header do Estoque) */
.ep-movimento-header {
    display: grid;
    /* Colunas: Thumbnail (auto), Info (1fr - flexível), Saldo (auto) */
    grid-template-columns: auto 1fr auto;
    gap: 20px;
    align-items: center; /* Alinha verticalmente os itens do grid */
    margin-bottom: 20px; /* Espaço abaixo do header, antes do divisor/abas */
    /* Removido padding-bottom e border-bottom daqui, o <hr> cuidará da divisão visual */
}

.ep-movimento-thumbnail {
    width: 80px;  /* Tamanho da imagem */
    height: 80px;
    border-radius: var(--ep-raio-borda-card); /* Borda do card para consistência */
    overflow: hidden;
    background-color: var(--ep-cor-cinza-fundo-input);
    border: 1px solid var(--ep-cor-cinza-borda);
    display: flex; /* Para centralizar a imagem se ela for menor que o container */
    align-items: center;
    justify-content: center;
}

.ep-movimento-thumbnail img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}


.ep-movimento-info h2 { /* #embalagemDetalheTitulo */
    font-size: 1.7rem;
    color: var(--ep-cor-azul-escuro);
    margin: 0 0 5px 0;
    font-weight: 600;
}

.ep-movimento-info p { /* #embalagemDetalheSubTitle e #embalagemDetalheSKU */
    font-size: 1rem;
    color: var(--ep-cor-cinza-texto-secundario, #6c757d);
    margin: 0 0 3px 0;
}

.ep-movimento-info .ep-sku-info-detalhe { /* Classe para o SKU se você adicionar */
    font-size: 0.85rem;
    color: #7f8c8d;
    margin-top: 5px;
}

.ep-movimento-saldo {
    text-align: center;
    background-color: var(--ep-cor-fundo-pagina); /* Fundo sutil para destacar */
    padding: 10px 20px; /* Padding interno */
    border-radius: var(--ep-raio-borda-card);
    border: 1px solid var(--ep-cor-cinza-borda);
    min-width: 150px; /* Largura mínima para este bloco */
    margin-right: 60px;
}

.ep-movimento-saldo label {
    display: block;
    font-size: 0.75rem;
    color: var(--ep-cor-cinza-texto-secundario);
    font-weight: 600;
    text-transform: uppercase;
    margin-bottom: 5px;
}

.ep-movimento-saldo span { /* #embalagemDetalheSaldoTotal */
    font-size: 2rem; /* Tamanho grande para o número */
    font-weight: 700;
    color: var(--ep-cor-azul-primario); /* Cor de destaque */
}

/* Divisor Horizontal (opcional) */
.ep-movimento-divisor {
    border: 0;
    height: 1px;
    background-color: var(--ep-cor-cinza-borda);
    margin: 0 0 25px 0; /* Margem abaixo, antes das abas */
}

/* ==========================================================================
   ### ESTILOS COMPLETOS PARA O RADAR DE ESTOQUE ###
   ========================================================================== */

/* Container principal do painel (fundo azul claro) */
.ep-sugestao-container {
    background-color: #eaf2f8; 
    border-radius: var(--gs-raio-borda-card);
    margin-bottom: 25px;
    border: 1px solid #b3d4e8;
    overflow: hidden; /* Garante que os cantos arredondados sejam respeitados */
}

/* Cabeçalho do painel ("Inteligência de Estoque") */
.ep-sugestao-header {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 15px;
    background-color: #d4e6f1;
    border-bottom: 1px solid #b3d4e8;
    cursor: pointer; /* Indica que é clicável */
    position: relative; /* Para a seta do accordion */
}

.ep-sugestao-header::after {
    content: '\f077'; /* Ícone de seta para cima (FontAwesome) */
    font-family: 'Font Awesome 5 Free';
    font-weight: 900;
    position: absolute;
    right: 15px;
    transition: transform 0.3s ease;
}

/* Estilo para quando estiver recolhido */
.ep-sugestao-container.recolhido .ep-sugestao-header::after {
    transform: rotate(180deg); /* Gira a seta para baixo */
}

.ep-sugestao-container.recolhido .ep-sugestao-conteudo {
    max-height: 0;
    padding-top: 0;
    padding-bottom: 0;
    overflow: hidden;
}


.ep-sugestao-header i {
    color: var(--gs-primaria);
    font-size: 1.2rem;
}

.ep-sugestao-header h3 {
    margin: 0;
    font-size: 1rem;
    font-weight: 600;
    color: var(--gs-secundaria);
}

/* Corpo principal do painel */
.ep-sugestao-conteudo {
    padding: 15px;
    display: flex;
    flex-direction: column;
    gap: 20px;
    /* Animação de abrir/fechar */
    max-height: 1000px; /* Um valor alto para permitir o conteúdo */
    transition: max-height 0.4s ease-out, padding 0.4s ease-out;
}

/* Estilo base para todos os cards do radar */
.ep-radar-card {
    background-color: var(--gs-fundo-card);
    border-radius: var(--gs-raio-borda-card);
    padding: 10px;
    text-align: center;
    border: 1px solid var(--gs-borda);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
}

/* Modificador para o card principal (o componente) */
.ep-radar-card.principal {
    background-color: var(--gs-fundo-alternativo); /* Fundo cinza claro */
    border-color: var(--gs-primaria);
    border-width: 2px;
}

.ep-radar-card .ep-radar-img {
    width: 60px;
    height: 60px;
    border-radius: 4px; /* Borda menos arredondada para a imagem */
    object-fit: cover;
}

.ep-radar-card .nome {
    font-size: 0.85em;
    font-weight: 500;
    color: var(--gs-texto-principal);
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.ep-radar-card .valor {
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--gs-secundaria);
}

.ep-radar-cards-wrapper {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 15px;
}

/* Card Principal (Item que está sendo embalado) */
.ep-radar-card-principal {
    display: flex;
    align-items: center;
    gap: 15px;
    padding-bottom: 20px;
    border-bottom: 1px solid var(--gs-borda);
}

.ep-radar-img {
    width: 60px;
    height: 60px;
    border-radius: var(--gs-raio-borda-card);
    object-fit: cover;
    flex-shrink: 0;
    background-color: #fff; /* Fundo branco para imagens transparentes */
}

/* Modificadores de cor para o saldo */
.ep-radar-card.principal .valor {
    color: var(--gs-primaria);
}
.ep-radar-card.baixo-estoque .valor {
    color: var(--gs-aviso);
}
.ep-radar-card.critico-estoque .valor {
    color: var(--gs-perigo);
}

.ep-radar-info {
    flex-grow: 1;
}

.ep-radar-info .nome {
    font-weight: 600;
    color: var(--gs-secundaria);
}
.ep-radar-info .variante {
    font-size: 0.9em;
    color: var(--gs-texto-secundario);
}

.ep-radar-saldo {
    text-align: right;
}

.ep-radar-saldo .label {
    font-size: 0.8em;
    text-transform: uppercase;
    color: var(--gs-texto-secundario);
}

.ep-radar-saldo .valor {
    font-size: 2rem;
    font-weight: 700;
    color: var(--gs-primaria);
    line-height: 1;
}

/* Container para a grade de cards dos Kits */
.ep-radar-kits-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); /* Min-width menor */
    gap: 15px;
}

/* Card individual de um Kit relacionado */
.ep-radar-kit-card {
    background-color: var(--gs-fundo-card);
    border-radius: var(--gs-raio-borda-card);
    padding: 10px;
    text-align: center;
    border: 1px solid var(--gs-borda);
    display: flex;
    flex-direction: column;
    align-items: center; /* Centraliza tudo */
    gap: 5px;
}

.ep-radar-kit-card .nome {
    font-size: 0.85em;
    font-weight: 500;
    color: var(--gs-texto-principal);
    height: 40px; /* Garante altura consistente para o texto */
    display: flex;
    align-items: center;
    justify-content: center;
}

.ep-radar-kit-card .valor {
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--gs-secundaria);
}

/* Modificadores de cor para o saldo do kit */
.ep-radar-kit-card.kit-baixo-estoque .valor {
    color: var(--gs-aviso);
}

.ep-radar-kit-card.kit-critico-estoque .valor {
    color: var(--gs-perigo);
}

/* Mensagem para quando não houver kits */
.ep-sugestao-nenhum-kit {
    font-style: italic;
    color: var(--gs-texto-secundario);
    text-align: center;
    padding: 10px 0;
}

/* --- ESTADO DE CARREGAMENTO INICIAL --- */

/* Quando o container principal está carregando dados... */
.carregando-dados-iniciais #embalagemCardsContainer {
    opacity: 0.5; /* Deixa os cards semi-transparentes */
    pointer-events: none; /* A linha mais importante: desabilita qualquer clique nos cards */
    cursor: wait; /* Mostra o cursor de espera */
}

/*------------------------------------*\
    #ABA "EMBALAR UNIDADE" - CONTEÚDO DE AÇÃO
\*------------------------------------*/

.ep-acao-embalagem-container {
    padding: 25px 15px; /* Espaçamento interno no container da aba */
    margin: 0 auto;     /* Centraliza o container de ação */
    background-color: var(--ep-cor-cinza-fundo-alternativo, #f9fbfd); /* Fundo sutil */
    border: 1px solid var(--ep-cor-cinza-borda, #e0e0e0);
    border-top: none; /* Remove a borda de cima, pois as abas já têm */
    border-radius: 0 0 var(--ep-raio-borda-card) var(--ep-raio-borda-card); /* Arredonda cantos inferiores */
}

.ep-form-grupo { /* Estilo base para grupos de formulário, você já deve ter algo similar */
    margin-bottom: 25px;
}
.ep-form-grupo:last-child {
    margin-bottom: 0;
}

.ep-grupo-quantidade {
    text-align: center; /* Centraliza o conteúdo deste grupo */
}

.ep-label-destacado {
    display: block;
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--ep-cor-azul-escuro);
    margin-bottom: 10px;
}

.ep-input-com-acoes {
    display: flex;
    align-items: center; /* Alinha o input e o botão "Tudo" */
    gap: 10px;
    max-width: 350px; /* Limita a largura do input + botão "Tudo" */
    margin: 0 auto 10px auto; /* Centraliza */
}

.ep-input.ep-input-grande { /* Para o input de quantidade */
    font-size: 1.5rem; /* Tamanho da fonte maior */
    padding: 12px 15px;
    text-align: center;
    flex-grow: 1; /* Faz o input ocupar o espaço disponível */
    min-width: 80px; /* Garante que não fique muito pequeno */
}
/* Remove setas de number input (opcional, mas melhora visual com botões customizados) */
.ep-input.ep-input-grande[type=number] {
    appearance: textfield; /* Propriedade padrão */
    -webkit-appearance: textfield; /* Para compatibilidade com WebKit mais antigos, se necessário */
    margin: 0; /* Para garantir que o -webkit-appearance: none interno não afete o espaçamento */
}
/* Específico para remover as setas no WebKit/Blink (Chrome, Safari, Edge) */
.ep-input.ep-input-grande[type=number]::-webkit-outer-spin-button,
.ep-input.ep-input-grande[type=number]::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0; /* Garante que não haja margem residual das setas */
}


#btnEmbalarTudoUnidade.ep-btn-secundario { /* Estilo para o botão "Tudo" */
    padding: 10px 15px; /* Ajuste o padding para o tamanho desejado */
    font-size: 0.9rem;
    min-height: 53px; /* Para alinhar com o input grande (ajuste conforme necessário) */
    /* Você pode usar a classe .ep-btn-secundario ou criar uma nova */
    background-color: var(--ep-cor-cinza-texto-secundario, #7f8c8d);
    color: var(--ep-cor-branco);
}
#btnEmbalarTudoUnidade.ep-btn-secundario:hover {
    background-color: #6a7879;
}


.ep-acoes-rapidas-qtd {
    display: flex;
    justify-content: center;
    gap: 8px;
    margin-bottom: 10px;
}

.ep-btn-outline-pequeno {
    background-color: transparent;
    border: 1px solid var(--ep-cor-azul-primario);
    color: var(--ep-cor-azul-primario);
    padding: 6px 12px;
    font-size: 0.85rem;
    font-weight: 500;
    border-radius: var(--ep-raio-borda-botao);
    transition: background-color 0.2s, color 0.2s;
}
.ep-btn-outline-pequeno:hover {
    background-color: var(--ep-cor-azul-primario);
    color: var(--ep-cor-branco);
}
/* Específico para o botão de remover (-) */
.ep-btn-outline-pequeno.ep-btn-perigo-outline {
    border-color: var(--ep-cor-vermelho-perigo);
    color: var(--ep-cor-vermelho-perigo);
}
.ep-btn-outline-pequeno.ep-btn-perigo-outline:hover {
    background-color: var(--ep-cor-vermelho-perigo);
    color: var(--ep-cor-branco);
}


.ep-feedback-saldo {
    font-size: 0.9rem;
    color: var(--ep-cor-cinza-texto-secundario);
    min-height: 1.2em; /* Para evitar que o layout pule quando o texto aparece */
    margin-top: 5px;
    text-align: center;
}

/* Estilo para o container dos botões de ação principais */
.ep-botoes-acao-principal {
    margin-top: 30px; /* Mais espaço antes do botão principal */
    justify-content: center; /* Centraliza o botão principal */
}

.ep-btn.ep-btn-grande { /* Para o botão "EMBALAR E ESTOCAR UNIDADES" */
    font-size: 1.1rem;
    padding: 12px 25px;
    font-weight: 600;
    /* A cor de fundo vem da classe .ep-btn-sucesso */
}

/* Estilos para textarea de observação (reutilizando .ep-textarea se já existir) */
.ep-form-grupo textarea.ep-textarea {
    min-height: 60px; /* Altura mínima */
    font-size: 0.95rem;
}

/*------------------------------------*\
    #ABA "MONTAR E EMBALAR KIT" - CONTEÚDO DE AÇÃO
\*------------------------------------*/

.ep-kit-passo {
    margin-bottom: 30px; /* Espaço entre os passos */
    padding-bottom: 20px; /* Espaço interno inferior */
    border-bottom: 1px dashed var(--ep-cor-cinza-borda, #e0e0e0); /* Divisor sutil entre os passos */
}
.ep-kit-passo:last-child {
    margin-bottom: 0;
    padding-bottom: 0;
    border-bottom: none;
}

/* Passo 1: Seleção do Kit */
.ep-kit-selecao-botoes {
    display: flex;
    flex-wrap: wrap; /* Permite que os botões quebrem linha */
    gap: 10px;
    justify-content: center; /* Centraliza os botões */
    margin-top: 10px;
}
.ep-kit-selecao-botoes .ep-btn { /* Estilo para os botões de kit */
    background-color: var(--ep-cor-branco-forte);
    color: var(--ep-cor-azul-subtitulo, #5a7c9b);
    border: 1px solid var(--ep-cor-cinza-borda);
    padding: 8px 18px;
    font-size: 0.95rem;
}
.ep-kit-selecao-botoes .ep-btn.active { /* Botão de kit selecionado */
    background-color: var(--ep-cor-azul-subtitulo, #5a7c9b);
    color: var(--ep-cor-branco);
    border-color: var(--ep-cor-azul-subtitulo, #5a7c9b);
    font-weight: 600;
}
.ep-kit-selecao-botoes .ep-btn:hover:not(.active) {
    border-color: var(--ep-cor-azul-subtitulo, #5a7c9b);
    color: var(--ep-cor-azul-subtitulo, #5a7c9b);
}
.ep-placeholder-kits {
    font-style: italic;
    color: var(--ep-cor-cinza-texto-secundario);
    width: 100%;
    text-align: center;
}


/* Passo 2: Seleção da Variação do Kit e Preview */
.ep-kit-variacao-selecao-container {
    display: flex;
    align-items: flex-end; /* Alinha o select e a imagem na base */
    gap: 20px;
    margin-top: 10px;
}
.ep-kit-variacao-selecao-container .ep-select.ep-input-medio { /* Para o select de variações */
    flex-grow: 1; /* Faz o select ocupar o espaço disponível */
    max-width: 400px; /* Limita a largura máxima do select */
    /* Você pode precisar criar a classe .ep-input-medio se não existir,
       ou apenas usar .ep-select e .ep-input */
    padding: 10px 14px; /* Consistência com outros inputs */
    font-size: 1rem;
}
.ep-kit-imagem-preview {
    width: 100px; /* Tamanho da imagem de preview do kit */
    height: 100px;
    border: 1px solid var(--ep-cor-cinza-borda);
    border-radius: var(--ep-raio-borda-card);
    overflow: hidden;
    background-color: var(--ep-cor-cinza-fundo-input);
    flex-shrink: 0; /* Não deixa a imagem encolher */
    display: flex;
    align-items: center;
    justify-content: center;
}
.ep-kit-imagem-preview img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain; /* 'contain' para ver a imagem inteira, 'cover' para preencher */
}


/* Passo 3: Composição do Kit */
.ep-composicao-titulo { /* Título "3. Composição e Disponibilidade..." */
    margin-bottom: 15px; /* Espaço antes da tabela */
    text-align: left; /* Alinha à esquerda, diferente de outros .ep-label-destacado */
    font-size: 1.1rem; /* Pode ser um pouco menor que os labels de passo */
}
.ep-tabela-wrapper.ep-tabela-composicao-kit {
    max-height: 250px; /* Altura máxima para a tabela, com scroll */
    overflow-y: auto;
    border: 1px solid var(--ep-cor-cinza-borda);
    border-radius: var(--ep-raio-borda-input);
}
/* Estilos para .ep-tabela-estilizada e .ep-mini-table você já deve ter.
   Apenas adicionamos uma coluna de Status. */
.ep-tabela-estilizada th:last-child, /* Para a coluna Status */
.ep-tabela-estilizada td:last-child {
    text-align: center;
}
.ep-status-componente {
    padding: 3px 8px;
    border-radius: 15px; /* Pílula */
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--ep-cor-branco);
    display: inline-block;
}
.ep-status-componente.ok {
    background-color: var(--ep-cor-verde-sucesso);
}
.ep-status-componente.atencao {
    background-color: var(--ep-cor-laranja-aviso);
}
.ep-status-componente.em-falta {
    background-color: var(--ep-cor-vermelho-perigo);
}

.ep-error-message { /* Já definido, mas garantindo que tenha margem */
    margin-top: 15px;
    padding: 10px;
    background-color: #ffebee;
    color: var(--ep-cor-vermelho-perigo);
    border: 1px solid var(--ep-cor-vermelho-perigo);
    border-radius: var(--ep-raio-borda-input);
    text-align: center;
}
.ep-error-message.hidden { display: none !important; }


/* Passo 4: Ação de Montagem */
.ep-kits-montaveis-info {
    padding: 12px 15px;
    background-color: var(--ep-cor-laranja-aviso); /* Cor de destaque para kits montáveis */
    color: var(--ep-cor-branco);
    border-radius: var(--ep-raio-borda-input);
    margin-bottom: 20px;
    text-align: center;
}
.ep-kits-montaveis-info span {
    font-size: 0.95rem;
    display: block;
    margin-bottom: 4px;
    opacity: 0.9;
}
.ep-kits-montaveis-info strong { /* #qtdDisponivelKitsNova */
    font-size: 1.8rem;
    font-weight: 700;
}

.ep-grupo-quantidade-kit .ep-label-destacado { /* Label para "Quantidade de Kits a Montar" */
    margin-top: 15px;
}
/* O input de quantidade e o botão Máx. reutilizarão os estilos de
   .ep-input-com-acoes, .ep-input-grande, #btnEmbalarTudoUnidade (adaptado para #btnMontarMaximoKits) */
#btnMontarMaximoKits.ep-btn-secundario { /* Similar ao #btnEmbalarTudoUnidade */
    padding: 10px 15px;
    font-size: 0.9rem;
    min-height: 53px;
    background-color: var(--ep-cor-cinza-texto-secundario, #7f8c8d);
    color: var(--ep-cor-branco);
}
#btnMontarMaximoKits.ep-btn-secundario:hover {
    background-color: #6a7879;
}

/* Ações rápidas para kits (.ep-acoes-rapidas-kit) podem usar os mesmos estilos de .ep-acoes-rapidas-qtd */
.ep-acoes-rapidas-kit {
    margin-top: 10px; /* Adiciona um pouco de espaço acima dos botões de +/- */
}


/*------------------------------------*\
    #TELA DE DETALHE DA EMBALAGEM (#embalarDetalheView)
\*------------------------------------*/
#embalarDetalheView { 
    position: relative; /* Para o botão fechar */
    padding-top: 50px;
}
.ep-embalar-header { 
    display: flex;
    align-items: center;
    gap: 20px;
    margin-bottom: 20px;
    padding-bottom: 20px;
    border-bottom: 1px solid var(--ep-cor-cinza-borda);
}
.ep-thumbnail-detalhe {
    width: 90px;
    height: 90px;
    border-radius: var(--ep-raio-borda-card);
    background-color: var(--ep-cor-cinza-fundo-input);
    overflow: hidden;
    flex-shrink: 0;
    border: 1px solid var(--ep-cor-cinza-borda);
    display: flex; align-items: center; justify-content: center;
}
.ep-thumbnail-detalhe img {
    width: 100%; height: 100%; object-fit: cover;
}
.ep-embalar-title-group {
    flex-grow: 1;
}

.ep-embalar-header .botao-fechar.ep-btn-perigo,
.ep-arremate-detail-header .botao-fechar.ep-btn-perigo {
    margin-left: auto; /* Empurra para a direita se o header for flex row */
    /* Se o header for flex column, você pode precisar de align-self: flex-end; */
    /* Ajuste as margens se necessário para o espaçamento visual */
    margin-top: 0; 
    margin-right: 0; 
}

/* Abas */
.ep-tabs {
    display: flex;
    gap: 5px;
    margin-bottom: 25px;
    border-bottom: 2px solid var(--ep-cor-cinza-borda);
}
/* .ep-tab-btn já estilizado em ordens-de-producao.css, mas podemos adicionar especificidade */
#embalarDetalheView .ep-tabs .ep-tab-btn { 
    padding: 10px 18px;
    border: none;
    background-color: transparent;
    color: var(--ep-cor-cinza-texto-secundario);
    border-radius: var(--ep-raio-borda-botao) var(--ep-raio-borda-botao) 0 0;
    cursor: pointer;
    font-size: 1rem;
    font-weight: 500;
    position: relative;
    bottom: -2px; 
    border-bottom: 2px solid transparent; 
    transition: color 0.2s ease, border-color 0.2s ease;
}
#embalarDetalheView .ep-tabs .ep-tab-btn.active {
    color: var(--ep-cor-azul-primario);
    border-bottom-color: var(--ep-cor-azul-primario);
    font-weight: 600;
}
#embalarDetalheView .ep-tabs .ep-tab-btn:hover:not(.active) {
    color: var(--ep-cor-azul-escuro);
}

.ep-tab-panel {
    display: none;
}


/* Card interno do formulário de embalagem */
.ep-embalar-form-card-interno { 
    background-color: var(--ep-cor-cinza-fundo-alternativo);
    padding: 20px;
    border-radius: var(--ep-raio-borda-card);
    border: 1px solid #eef2f7;
}
.ep-info-produto-embalar p {
    font-size: 1rem; margin-bottom: 6px; color: var(--ep-cor-texto-principal);
}
.ep-info-produto-embalar strong {
    color: var(--ep-cor-azul-escuro); min-width: 80px; display: inline-block;
}
.ep-qtd-disponivel-destaque {
    padding: 12px 15px;
    background-color: var(--ep-cor-azul-primario);
    color: var(--ep-cor-branco);
    border-radius: var(--ep-raio-borda-input);
    margin: 15px 0;
    text-align: center;
}
.ep-qtd-disponivel-destaque span {
    font-size: 0.95rem; display: block; margin-bottom: 4px; opacity: 0.9;
}
.ep-qtd-disponivel-destaque strong {
    font-size: 1.6rem; font-weight: 700;
}

/* Aba Kit (reutilizando .op-botao para botões de seleção de kit) */
#kitsListNova .op-botao { 
    background-color: var(--ep-cor-branco);
    color: var(--ep-cor-azul-subtitulo);
    border: 1px solid var(--ep-cor-cinza-borda);
    margin-right: 8px; margin-bottom: 8px;
    padding: 8px 15px; /* Ajuste para botões menores */
}
#kitsListNova .op-botao.active {
    background-color: var(--ep-cor-azul-subtitulo);
    color: var(--ep-cor-branco);
    border-color: var(--ep-cor-azul-subtitulo);
}
.ep-mini-table { 
    width: 100%; border-collapse: collapse; font-size: 0.9rem; margin-top: 10px;
}
.ep-mini-table th, .ep-mini-table td {
    padding: 8px 10px; text-align: left; border: 1px solid var(--ep-cor-cinza-borda);
}
.ep-mini-table th {
    background-color: var(--ep-cor-cinza-fundo-input); font-weight: 600;
}
.ep-mini-table tr.item-insuficiente td {
    color: var(--ep-cor-vermelho-perigo); background-color: #fdecea;
}
#kitErrorMessageNova.ep-error-message {
    color: var(--ep-cor-vermelho-perigo); background-color: #ffebee;
    border: 1px solid var(--ep-cor-vermelho-perigo); padding: 10px;
    border-radius: var(--ep-raio-borda-input); margin-top: 10px;
}
.ep-error-message.hidden { display: none; }

.ep-kit-componente-disponivel-input {
    font-size: 1.2rem; /* <<< SEU TAMANHO DE FONTE DESEJADO AQUI */
    background-color: transparent !important; /* !important pode ser necessário para sobrescrever inline */
    border: none !important;
    box-shadow: none !important;
    color: var(--ep-cor-texto-principal); /* Garante uma cor de texto legível */
    width: 60px; /* Ajuste a largura se necessário */
    text-align: center; /* Garante o alinhamento */
    padding: 0; /* Remove padding se não quiser */
}
.ep-kit-componente-disponivel-input::-webkit-outer-spin-button,
.ep-kit-componente-disponivel-input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0; /* Remove setas em Chrome/Safari/Edge */
}

.ep-button-group{
    display:flex; 
    flex-wrap:wrap; 
    gap:10px; 
    margin-top:5px;
    justify-content: center;
}

/*------------------------------------*\
    #UTILITÁRIOS (Spinner, Popups)
\*------------------------------------*/
.spinner { 
    display: flex; 
    justify-content: center; 
    align-items: center;
    padding: 25px; 
    font-size: 1rem; 
    color: #555; 
    min-height: 60px;
}
.spinner::before {
    content: ''; 
    display: inline-block; 
    width: 22px; 
    height: 22px;
    margin-right: 12px; 
    border: 3px solid #ccc;
    border-top-color: 
    var(--ep-cor-azul-primario);
    border-radius: 50%; 
    animation: ep-spin 1s linear infinite;
    vertical-align: middle;
}
@keyframes ep-spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

.spinner-btn-interno { 
    width: 1em; height: 1em; border-width: 2px; margin-right: 8px;
    border-style: solid; border-color: rgba(255,255,255,0.3);
    border-top-color: var(--ep-cor-branco); 
    border-radius: 50%; animation: ep-spin 0.8s linear infinite;
    display: inline-block;
}

/*------------------------------------*\
    # Popups de Mensagem / Confirmação
\*------------------------------------*/

/* Estilo para o fundo escurecido */
.popup-overlay {
    position: fixed; 
    top: 0; 
    left: 0; 
    width: 100%; 
    height: 100%;
    background-color: rgba(44, 62, 80, 0.7); /* Fundo azul-escuro semi-transparente */
    z-index: 10001; /* Fica abaixo do popup, mas acima do resto da página */
    animation: ep-fadeInOverlayPopup 0.3s ease-out;
}

/* Estilo principal para a caixa de diálogo do popup */
.popup-mensagem {
    position: fixed; 
    top: 50%; 
    left: 50%;
    transform: translate(-50%, -50%);
    padding: 25px 30px; 
    border-radius: var(--ep-raio-borda-container);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
    z-index: 10002; /* Acima do overlay */
    max-width: 480px; 
    width: 90%;
    text-align: center; 
    font-family: var(--ep-font-principal);
    animation: ep-fadeInPopup 0.3s ease-out;
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    justify-content: center;
    
    /* --- CORREÇÃO PRINCIPAL --- */
    background-color: var(--ep-cor-branco, #ffffff) !important; /* Fundo branco sólido */
    color: var(--ep-cor-texto-principal, #333) !important; /* Cor de texto padrão escura */
    border-left: 5px solid; /* A borda colorida continua */
}

.popup-mensagem p { 
    font-size: 1.05rem; 
    line-height: 1.5; 
    margin-bottom: 20px; 
    font-weight: 500; 
}

/* Cores específicas para os tipos de popup (sobrescrevem a cor do texto e da borda) */
.popup-mensagem.popup-sucesso { 
    background-color: #f0f9f4 !important; /* Fundo verde bem claro */
    color: var(--ep-cor-verde-sucesso) !important; 
    border-left-color: var(--ep-cor-verde-sucesso); 
}
.popup-mensagem.popup-erro,
.popup-mensagem.popup-perigo { /* Adicionado .popup-perigo */
    background-color: #fef2f2 !important; /* Fundo vermelho bem claro */
    color: var(--ep-cor-vermelho-perigo) !important; 
    border-left-color: var(--ep-cor-vermelho-perigo); 
}
.popup-mensagem.popup-aviso { 
    background-color: #fffaf0 !important; /* Fundo laranja bem claro */
    color: var(--ep-cor-laranja-aviso) !important; 
    border-left-color: var(--ep-cor-laranja-aviso); 
}

/* Botões dentro do Popup */
.popup-mensagem button { 
    padding: 10px 28px; 
    margin-top: 10px; 
    background-color: var(--ep-cor-azul-escuro); 
    color: var(--ep-cor-branco); 
    border: none; 
    border-radius: var(--ep-raio-borda-botao);
    cursor: pointer; 
    font-size: 0.95rem; 
    font-weight: 600; 
    transition: background-color 0.2s ease;
}
.popup-mensagem button:hover { 
    background-color: #4a617a; 
}

/* Estilos específicos para os botões de confirmação Sim/Não */
.popup-mensagem .ep-btn-confirmar, .popup-mensagem .es-btn-confirmar { /* Pega ambas as classes */
    background-color: var(--ep-cor-vermelho-perigo) !important;
}
.popup-mensagem .ep-btn-confirmar:hover, .popup-mensagem .es-btn-confirmar:hover {
    background-color: var(--ep-cor-vermelho-hover) !important;
}

.popup-mensagem .ep-btn-cancelar, .popup-mensagem .es-btn-cancelar {
    background-color: var(--ep-cor-cinza-texto-secundario) !important;
}
.popup-mensagem .ep-btn-cancelar:hover, .popup-mensagem .es-btn-cancelar:hover {
    background-color: #6a7879 !important;
}


/* Animações (se ainda não as tiver) */
@keyframes ep-fadeInPopup { from { opacity: 0; transform: translate(-50%, -55%); } to { opacity: 1; transform: translate(-50%, -50%); } }
@keyframes ep-fadeInOverlayPopup { from { opacity: 0; } to { opacity: 1; } }

.hidden { display: none !important; }


/* Ajustes para o novo container de filtros */
.ep-card-filtros .ep-input-busca {
    margin: 0; /* Remove a margem auto para alinhar à esquerda */
    max-width: 450px;
}

/* --- Overlay de Carregamento para a Lista de Itens --- */
.ep-lista-loading-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(255, 255, 255, 0.8); /* Fundo branco semi-transparente */
    z-index: 10;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 0 0 var(--ep-raio-borda-card) var(--ep-raio-borda-card);
    transition: opacity 0.3s ease;
}


/* Botão de Estorno na Tabela de Histórico (AGORA COMO ÍCONE) */
.ep-btn-icon-estorno {
    background: transparent;
    border: none;
    color: var(--ep-cor-azul-primario); /* Usando azul para "desfazer" uma ação */
    cursor: pointer;
    font-size: 1.1rem; /* Tamanho do ícone */
    padding: 5px 8px; /* Pequeno padding para área de clique */
    transition: color 0.2s, transform 0.2s;
    border-radius: 50%; /* Opcional: para um fundo circular no hover */
}
.ep-btn-icon-estorno:hover:not(:disabled) {
    color: var(--ep-cor-azul-hover);
    transform: scale(1.2);
    background-color: #eaf2f8; /* Fundo sutil no hover */
}
.ep-btn-icon-estorno:disabled {
    color: var(--ep-cor-cinza-borda);
    cursor: not-allowed;
    transform: none;
    background-color: transparent;
}

/* Tag/Badge para indicar que foi estornado */
.ep-tag-estornado {
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--ep-cor-cinza-texto-secundario);
    background-color: #f1f3f5;
    padding: 2px 6px;
    border-radius: 4px;
    display: inline-block;
}

/*------------------------------------*\
    #TABELAS ESTILIZADAS (Histórico, Composição de Kit)
\*------------------------------------*/

/* Wrapper para tabelas, permite scroll horizontal se necessário */
.ep-tabela-wrapper {
    overflow-x: auto;
    width: 100%;
    margin-top: 15px; /* Espaço acima da tabela */
    padding:8px;
}

/* Estilo principal da tabela */
.ep-tabela-estilizada {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.9rem;
    min-width: 600px; /* Garante que a tabela tenha uma largura mínima, forçando o scroll em vez de espremer o conteúdo */
}

.ep-tabela-estilizada th,
.ep-tabela-estilizada td {
    padding: 12px 15px; /* Aumenta o padding para mais respiro */
    border-bottom: 1px solid var(--ep-cor-cinza-borda);
    text-align: left;
    vertical-align: middle;
}

.ep-tabela-estilizada th {
    background-color: var(--ep-cor-cinza-fundo-input);
    font-weight: 600;
    color: var(--ep-cor-azul-escuro);
    text-transform: uppercase;
    font-size: 0.8rem;
    white-space: nowrap; /* Impede que os títulos do cabeçalho quebrem linha */
}

.ep-tabela-estilizada tbody tr:hover {
    background-color: #f5f8fa; /* Efeito de hover sutil nas linhas */
}

/* Opcional: Se quiser dar um visual um pouco diferente para a mini-tabela de composição de kit */
.ep-tabela-estilizada.ep-mini-table td {
    padding: 8px 10px; /* Padding um pouco menor para a mini-tabela */
    font-size: 0.85rem;
}

/* Header para seções com título e botões de ação */
.ep-secao-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    padding-bottom: 10px;
    border-bottom: 1px solid #eee;
}

.ep-secao-header .ep-titulo-secao {
    margin-bottom: 0;
    padding-bottom: 0;
    border-bottom: none;
}

/* Botão de Atualizar (cópia do estilo de estoque) */
.ep-btn-atualizar {
    background-color: transparent;
    color: var(--ep-cor-azul-primario);
    border: 1px solid var(--ep-cor-cinza-borda);
    border-radius: 50px;
    padding: 6px 12px;
    font-size: 0.85rem;
    font-weight: 500;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
}

.ep-btn-atualizar:hover:not(:disabled) {
    background-color: var(--ep-cor-azul-primario);
    color: var(--ep-cor-branco);
    border-color: var(--ep-cor-azul-primario);
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(52, 152, 219, 0.3);
}

.ep-btn-atualizar:disabled {
    color: #b0b9c2;
    background-color: #f8f9fa;
    cursor: not-allowed;
    border-color: var(--ep-cor-cinza-borda);
}

.ep-btn-atualizar:disabled i {
    animation: ep-spin 1.2s linear infinite; /* Requer a keyframe 'ep-spin' */
}

/*------------------------------------*\
    # Filtros Avançados e Ordenação
\*------------------------------------*/

/* Linha que contém a busca e o botão de filtros */
.ep-filtros-linha {
    display: flex;
    gap: 15px;
    align-items: center;
    flex-wrap: wrap; /* Para quebrar linha em telas menores */
}

.ep-card-filtros .ep-form-grupo {
    margin-bottom: 0; /* Remove margem padrão de form-grupo aqui */
}

/* Botão para mostrar/esconder filtros */
.ep-btn-filtros {
    background-color: transparent;
    border: 1px solid var(--ep-cor-cinza-borda);
    color: var(--ep-cor-texto-principal);
    padding: 10px 15px;
    border-radius: var(--ep-raio-borda-botao);
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-weight: 500;
    transition: all 0.2s ease;
    white-space: nowrap;
}
.es-btn-filtros:hover {
    background-color: var(--ep-cor-cinza-fundo-input);
    border-color: #b0b9c2;
}


/* Container dos filtros avançados */
.ep-filtros-avancados-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); /* Grade responsiva */
    gap: 15px;
    align-items: flex-end; /* Alinha os itens (especialmente o botão) na base */
    padding: 20px;
    margin: 25px;
    background-color: var(--ep-cor-cinza-fundo-alternativo);
    border-radius: var(--ep-raio-borda-card);
    border: 1px solid #eef2f7;
    /* Animação suave para aparecer */
    max-height: 0;
    overflow: hidden;
    padding-top: 0;
    padding-bottom: 0;
    transition: max-height 0.4s ease-out, padding 0.4s ease-out;
}
.ep-filtros-avancados-container:not(.hidden) {
    max-height: 300px; /* Altura suficiente para mostrar os filtros */
    padding-top: 20px;
    padding-bottom: 20px;
}

/* Botão de limpar filtros */
.ep-btn-limpar-filtros {
    background-color: var(--ep-cor-vermelho-perigo);
    color: var(--ep-cor-branco);
    padding: 10px 15px;
    border: none;
    border-radius: var(--ep-raio-borda-botao);
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-weight: 500;
    width: 80%; /* Ocupa a célula da grade */
    justify-content: center;
}
.ep-btn-limpar-filtros:hover {
    background-color: var(--ep-cor-vermelho-hover);
}

#painel-principal-root {
    background-color: var(--ep-cor-fundo-pagina);
    padding: 8px;
    border-radius: var(--ep-raio-borda-card);
    border: 1px solid var(--ep-cor-cinza-borda);
    margin-top: 20px; /* Adiciona um espaço abaixo das métricas */
}

/* Contêiner principal cinza que envolve tudo */
.ep-painel-principal-com-filtros {
    background-color: var(--ep-cor-fundo-pagina); /* Tom de cinza claro */
    padding: 20px;
    border-radius: var(--ep-raio-borda-card);
    border: 1px solid var(--ep-cor-cinza-borda);
}

/* O grid de 2 colunas, agora DENTRO do contêiner cinza */
.ep-layout-principal {
    display: grid;
    grid-template-columns: 1fr 300px; /* Cards (1fr) à esquerda, Filtros (300px) à direita */
    gap: 15px;
}

/* Coluna da direita (filtros) com a linha divisória */
.painel-filtros-coluna {
    border-left: 1px solid var(--ep-cor-cinza-borda);
    padding-left: 15px;
}

/* Garante que os cards na coluna da esquerda se organizem em 2 colunas internas */
.painel-cards-coluna .gs-container-cards {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
    margin-bottom: 25px;
}

/* Classes para estilizar a borda dos cards de acordo com o status */
.card-borda-charme.aviso {
    background-color: var(--gs-aviso);
}

.oa-card-arremate-react.aguardando-muito .card-borda-charme {
    background-color: var(--gs-aviso);
}

/* ==========================================================================
   # ESTILOS PARA O NOVO CARD DE EMBALAGEM "FLUXO CONTÍNUO" (REACT)
   ========================================================================== */

.ep-card-fluxo {
    background-color: var(--ep-cor-branco);
    border-radius: var(--ep-raio-borda-card);
    box-shadow: var(--ep-sombra-padrao);
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    position: relative; /* Essencial para a borda */
    overflow: hidden; /* Garante que o rodapé não vaze para fora */
    display: flex; /* Organiza o corpo e o rodapé verticalmente */
    flex-direction: column;
}

.ep-card-fluxo:hover {
    transform: translateY(-4px);
    box-shadow: var(--ep-sombra-hover);
}

/* 1. Borda de Status Vertical */
.ep-card-fluxo .card-borda-charme {
    position: absolute;
    left: 0;
    top: 0;
    width: 6px;
    height: 100%;
    background-color: var(--ep-cor-azul-primario);
    transition: background-color 0.3s ease;
}

.ep-card-fluxo.aguardando-muito .card-borda-charme {
    background-color: var(--ep-cor-laranja-aviso);
}

/* 2. Corpo Principal (Imagem + Informações) */
.ep-card-fluxo .card-corpo-principal {
    display: grid;
    grid-template-columns: auto 1fr; /* Coluna da imagem com tamanho automático, info ocupa o resto */
    gap: 16px;
    padding: 16px;
    /* Adiciona padding-left para não ficar colado na borda colorida */
    padding-left: calc(16px + 6px); /* 16px de padding + 6px da borda */
    flex-grow: 1; /* Faz esta área crescer para empurrar o rodapé para baixo */
}

.ep-card-fluxo .card-imagem-produto {
    width: 70px;
    height: 70px;
    object-fit: cover;
    border-radius: 8px;
    background-color: var(--ep-cor-cinza-fundo-input);
}

.ep-card-fluxo .card-info-bloco {
    display: flex;
    flex-direction: column;
    justify-content: space-between; /* MÁGICA: empurra os blocos para o topo e rodapé */
    min-height: 80px; /* Garante uma altura mínima para o efeito funcionar */
}

/* Bloco de Identidade do Produto (topo) */
.ep-card-fluxo .info-identidade h3 {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--ep-cor-azul-escuro);
    margin: 0 0 4px 0;
}
.ep-card-fluxo .info-identidade p {
    font-size: 0.9rem;
    color: var(--ep-cor-cinza-texto-secundario);
    margin: 0;
}
.ep-card-fluxo .info-identidade .info-sku {
    font-size: 0.8rem;
    font-style: italic;
    margin-top: 4px;
}

/* Bloco de Status Temporal (rodapé) */
.ep-card-fluxo .info-status-temporal {
    display: flex;
    flex-direction: column; /* Empilha as informações de tempo */
    gap: 6px; /* Espaço entre as linhas de tempo */
    margin-top: 10px; /* Garante um espaço mínimo do bloco de cima */
}
.ep-card-fluxo .info-status-temporal .info-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.85rem;
    color: var(--ep-cor-texto-secundario);
}
.ep-card-fluxo .info-status-temporal .info-item i {
    width: 12px; /* Alinha os ícones */
    text-align: center;
}

/* 3. Rodapé de Status (Disponibilidade) */
.ep-card-fluxo .card-rodape-status {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: #f0f8ff; /* Azul bem claro */
    padding: 10px 16px;
    width: 100%;
    margin-top: auto; /* Garante que ele fique no final do flex container */
}

.ep-card-fluxo .rodape-label {
    font-size: 0.8rem;
    font-weight: 700;
    color: var(--ep-cor-azul-primario);
    text-transform: uppercase;
}

.ep-card-fluxo .rodape-valor {
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--ep-cor-azul-escuro);
}

/* ==========================================================================
   # COMPONENTE: LEGENDA DE STATUS DA FILA
   ========================================================================== */

.ep-legenda-status-container {
    margin: 25px;
    padding-top: 15px;
    border-top: 1px solid var(--ep-cor-cinza-borda);
}

.ep-legenda-titulo {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--ep-cor-cinza-texto-secundario);
    text-transform: uppercase;
    margin-bottom: 10px;
}

.ep-legenda-lista {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.ep-legenda-item {
    display: flex;
    align-items: center;
    font-size: 0.9rem;
    color: var(--ep-cor-texto-principal);
}

.ep-legenda-cor {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    margin-right: 10px;
    flex-shrink: 0;
}

/* As cores devem corresponder às cores da borda do card */
.ep-legenda-cor.normal {
    background-color: var(--ep-cor-azul-primario);
}
.ep-legenda-cor.aviso {
    background-color: var(--ep-cor-laranja-aviso);
}

/* ==========================================================================
   # TÍTULOS DE SEÇÃO INTERNOS
   ========================================================================== */

.ep-secao-titulo {
    font-size: 1.4rem;
    /* Usando a variável de cor principal da sua página de embalagem */
    color: var(--ep-cor-azul-escuro); 
    font-weight: 500; /* Um peso semi-negrito, como em outros títulos */
    margin: 15px 0 0 10px;
    padding-bottom: 10px; /* Espaço entre o texto e a linha (caso não use hr) */
}

.ep-secao-divisor {
    border: none; /* Remove a borda padrão do hr */
    border-top: 1px solid var(--ep-cor-cinza-borda); /* Cria uma linha fina */
    margin: 0 0 25px 0; /* Adiciona um bom espaço entre a linha e o conteúdo abaixo */
}


/* --- ESTILOS PARA O OVERLAY DE PROCESSAMENTO --- */
.ep-detalhe-processando-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(255, 255, 255, 0.85);
    z-index: 999;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 15px;
    border-radius: var(--ep-raio-borda-container);
    cursor: wait;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
}

.ep-detalhe-processando-overlay.visivel {
    opacity: 1;
    visibility: visible;
}

.ep-detalhe-processando-overlay .spinner-overlay {
    width: 40px;
    height: 40px;
    border: 4px solid #ccc;
    border-top-color: var(--ep-cor-azul-primario);
    border-radius: 50%;
    animation: ep-spin 1s linear infinite; /* Reutiliza a animação de spin que já existe */
}

.ep-detalhe-processando-overlay .texto-overlay {
    font-size: 1.1rem;
    font-weight: 500;
    color: var(--ep-cor-azul-escuro);
}

/*------------------------------------*\
    #RESPONSIVIDADE
\*------------------------------------*/
@media (max-width: 1024px) { /* Tablets */
    #painel-principal-root {
        /* Em telas menores, volta para uma única coluna */
        grid-template-columns: 1fr;
    }
    
    .container-ep {
    padding: 50px;
    }

    .ep-section-description{
    font-size: 1.2rem;
    text-align: center; 
    font-style: italic; 
    color: var(--ep-cor-cinza-texto);
    }

    .op-embalagem-card-variante {
    font-size: 1.2rem;
    }

    .op-embalagem-card-disponivel {
    font-size: 1.2rem;
    }

    .ep-input-busca {
    padding: 10px 14px;
    font-size: 1rem;
    }
    
    .ep-container-principal {
        padding: 15px;
    }
    .ep-titulo-secao { font-size: 1.4rem; }
    .ep-card { padding: 20px; }

    .ep-embalagem-card-container {
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    }

    .ep-titulo-variacao-prod {
    font-size: 1.3rem;
    }

    #embalarDetalheView .ep-tabs .ep-tab-btn {
        font-size: 1.3rem;
    }

    .ep-qtd-disponivel-destaque {
    justify-self: center;
    }

    .ep-form-estilizado .ep-form-grupo {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    }

    .ep-form-estilizado label{
    font-size: 1.3rem;
    text-align: center;

    }
    .ep-input-embalar-produto{
    width: 90px;
    padding: 20px 15px;
    }

    .ep-qtd-disponivel-destaque span {
    font-size: 1.3rem;
    }

    .ep-tab-panel.active {
    display: block;
    }

    .ep-btn {
    padding: 20px 20px;
    font-size: 0.95rem;
    }

    .ep-input, .ep-select {
    width: 100%;
    font-size: 1.2rem;
    }

    .ep-mini-table {
    justify-self: center;
    width: 80%;
    font-size: 1.2rem;
}
    #kitErrorMessageNova.ep-error-message {
    width: 70%;
    justify-self: center;
    font-size: 1.2rem;
    }

    .ep-input-qte-embalar-produto{
        width: 50%;
        font-size: 1.2rem;
        padding: 20px;
        border: 1px solid var(--ep-cor-cinza-borda);
        border-radius: var(--ep-raio-borda-input);
    }

    .ep-layout-principal {
        grid-template-columns: 1fr; /* Coluna única em telas menores */
        gap:0;
    }
    /* INVERTE A ORDEM VISUAL NO MOBILE */
    .painel-filtros-coluna {
        order: 1; /* Filtros vêm primeiro */
        border-left: none;
        padding-left: 0;
    }
    .painel-cards-coluna {
        order: 2; /* Cards vêm depois */
    }
    .painel-cards-coluna .gs-container-cards {
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); /* Volta a ser responsivo no mobile */
    }

}

/* --- ESTILOS PARA O MODAL DE HISTÓRICO GERAL --- */
#historicoGeralModalContainer .es-modal-conteudo {
    background-color: var(--gs-fundo-card);
    border-radius: var(--gs-raio-borda-card);
    box-shadow: var(--gs-sombra-padrao);
    width: 90%;
    max-width: 900px;
    z-index: 10001;
    position: relative;
    display: flex;
    flex-direction: column;
    max-height: 90vh; /* Limita a altura total do modal a 90% da tela */
}

/* O cabeçalho e o rodapé NÃO devem esticar. Eles têm tamanho fixo. */
#historicoGeralModalContainer .ep-modal-header,
#historicoGeralModalContainer .ep-modal-filtros,
#historicoGeralModalContainer .ep-modal-footer {
    flex-shrink: 0; /* Impede que esses elementos encolham */
}

#historicoGeralModalContainer .ep-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    border-bottom: 1px solid var(--gs-borda);
    margin-bottom: 15px;
}

#historicoGeralModalContainer .ep-modal-titulo {
    font-size: 1.2rem;
    color: var(--gs-secundaria);
    margin: 0;
}

#historicoGeralModalContainer .ep-modal-filtros {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    padding: 15px;
    background-color: var(--gs-fundo-alternativo);
    border: 1px solid var(--gs-borda);
    border-radius: var(--gs-raio-borda-input);
    margin-bottom: 20px;
}

#historicoGeralModalContainer .ep-form-grupo {
     margin-bottom: 0;
}


#historicoGeralModalContainer .ep-modal-filtros .ep-form-grupo { margin: 0; }

#historicoGeralModalContainer .ep-modal-filtros .ep-form-grupo label { 
    font-size: 0.8rem; 
    margin: 5px 10px 0 0;
}

#historicoGeralModalContainer .ep-modal-filtros .ep-select { padding: 8px 10px; font-size: 0.9rem; }

#historicoGeralModalContainer .ep-modal-body {
    flex-grow: 1; /* Faz este elemento ocupar todo o espaço vertical disponível */
    overflow-y: auto; /* Adiciona a barra de rolagem vertical APENAS se o conteúdo for maior */
    padding: 0;
}

#historicoGeralModalContainer .ep-modal-footer {
    border-top: 1px solid var(--gs-borda);
}

@media (max-width: 768px) { /* Mobile grande */
    .ep-titulo-secao { font-size: 1.3rem; text-align: center; }
    .ep-descricao-secao { font-size: 0.9rem; }
    .ep-card { padding: 15px; }

    .ep-input-busca { max-width: 100%; font-size: 0.95rem; }
    .ep-embalagem-card-container {
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    }
    .op-embalagem-card-produto { font-size: 1.05rem; }
    .op-embalagem-card-variante { font-size: 0.85rem; }
    .op-embalagem-card-disponivel strong { font-size: 1.1rem; }

    .ep-embalar-header { flex-direction: column; align-items: center; text-align: center; }
    /* Ajuste no botão fechar para não sobrepor título em telas menores */
    .ep-tabs { justify-content: center; flex-wrap: wrap; }
    .ep-tab-btn { padding: 8px 12px; font-size: 0.9rem; }
    .ep-form-botoes { flex-direction: column; align-items: stretch; }
    .ep-form-botoes .ep-btn { width: 100%; }

     #embalarDetalheView {
        padding-top: 60px; /* Aumenta o padding se o botão sobrepuser o título */
    }

    .botao-fechar {
        top: 10px;
        right: 10px;
        width: 32px;
        height: 32px;
        line-height: 32px;
        font-size: 1rem;
    }
    /* cards */
    .ep-embalagem-card-container {
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    }

    /* header da view de detalhe */

    .ep-movimento-header {
        grid-template-columns: 1fr; /* Coluna única */
        text-align: center; /* Centraliza tudo no mobile */
        gap: 15px; /* Reduz o gap */
    }

    .ep-movimento-thumbnail {
        margin: 0 auto 10px auto; /* Centraliza a imagem */
        width: 100px; /* Pode aumentar um pouco no modo coluna única */
        height: 100px;
    }

    .ep-movimento-info h2 {
        font-size: 1.5rem;
    }
    .ep-movimento-info p {
        font-size: 0.9rem;
    }

    .ep-movimento-saldo {
        margin: 0 auto; /* Centraliza o bloco de saldo */
        padding: 10px 15px;
    }
    .ep-movimento-saldo span {
        font-size: 1.8rem;
    }

    /* Ajuste no botão fechar para não sobrepor título em telas menores */
    #embalarDetalheView .botao-fechar {
        top: 15px;
        right: 15px;
    }

    /* --- Aba de Kit (simplificado) --- */
    .ep-kit-variacao-selecao-container {
        flex-direction: column; /* Empilha select e imagem */
        align-items: center; /* Centraliza */
    }
    .ep-kit-variacao-selecao-container .ep-select.ep-input-medio {
        max-width: 100%; /* Ocupa largura total */
        margin-bottom: 15px;
    }

    /* Esconde o cabeçalho da tabela no mobile */
    #historicoEmbalagemContainer .ep-tabela-estilizada thead {
        display: none; 
    }

    /* Remove a largura mínima para que a tabela não force o scroll */
    #historicoEmbalagemContainer .ep-tabela-estilizada {
        min-width: 100%;
    }

    #historicoEmbalagemContainer .ep-tabela-estilizada,
    #historicoEmbalagemContainer .ep-tabela-estilizada tbody,
    #historicoEmbalagemContainer .ep-tabela-estilizada tr,
    #historicoEmbalagemContainer .ep-tabela-estilizada td {
        display: block; /* Transforma tudo em blocos */
        width: 100% !important; /* Força largura total */
        text-align: right; /* Alinha o valor da célula à direita */
    }

    #historicoEmbalagemContainer .ep-tabela-estilizada tr {
        border: 1px solid var(--ep-cor-cinza-borda);
        border-radius: var(--ep-raio-borda-card);
        padding: 15px;
        margin-bottom: 15px;
        box-shadow: var(--ep-sombra-padrao);
    }

    #historicoEmbalagemContainer .ep-tabela-estilizada td {
        padding: 8px 0; /* Padding vertical, sem padding lateral */
        border-bottom: 1px dotted #e9ecef; /* Linha pontilhada entre "campos" */
        display: flex; /* Alinha o label e o valor */
        justify-content: space-between;
        align-items: center;
        font-size: 0.75rem;
        font-weight: 500;
    }

    #historicoEmbalagemContainer .ep-tabela-estilizada td:last-child {
        border-bottom: none; /* Remove a linha do último "campo" */
    }

    #historicoEmbalagemContainer .ep-tabela-estilizada td::before {
        content: attr(data-label); /* Pega o texto do data-label do HTML */
        font-weight: 600;
        color: var(--ep-cor-cinza-texto-secundario);
        text-align: left;
        margin-right: 10px;
    }

    /* Garante que o conteúdo da célula de ações fique alinhado corretamente */
    #historicoEmbalagemContainer .ep-tabela-estilizada td[data-label="Ações"] {
        justify-content: flex-end; /* Alinha o botão de estorno à direita */
    }

     /* Seleciona a tabela dentro da  nova aba */
    #retornarArremateContainer .ep-tabela-estilizada thead {
        display: none;
    }

    #retornarArremateContainer .ep-tabela-estilizada tr {
        display: block;
        margin-bottom: 15px;
        border: 1px solid var(--ep-cor-cinza-borda);
        border-radius: var(--ep-raio-borda-card);
        padding: 15px;
        box-shadow: var(--ep-sombra-padrao);
    }

    #retornarArremateContainer .ep-tabela-estilizada td {
        display: flex;
        /* Alinha o rótulo à esquerda e o valor à direita */
        justify-content: space-between; 
        align-items: center;
        padding: 10px 0;
        border-bottom: 1px dotted #e9ecef;
        text-align: left;
    }
    #retornarArremateContainer .ep-tabela-estilizada tr td:last-child {
        border-bottom: none;
    }

    /* O RÓTULO (ex: "Data:") */
    #retornarArremateContainer .ep-tabela-estilizada td::before {
        content: attr(data-label);
        font-weight: 600;
        color: var(--ep-cor-cinza-texto-secundario);
        /* Permite que o rótulo encolha se necessário */
        flex-shrink: 1; 
        margin-right: 10px; /* Garante um espaço */
    }

    /* O VALOR (o texto dentro do <span>) */
    #retornarArremateContainer .ep-tabela-estilizada td span {
        text-align: right;
        font-weight: 500;
        color: var(--ep-cor-texto-principal);
        /* IMPORTANTE: Permite que o valor quebre a linha se for muito longo */
        word-break: break-word; 
        /* Ocupa o espaço disponível, mas pode encolher */
        flex-grow: 1;
        flex-shrink: 1;
        font-size: 0.75rem;
    }
    
    /* Estilo para a linha de Ações */
    #retornarArremateContainer .ep-tabela-estilizada td[data-label="Ações"] {
        /* Remove o espaço entre "falso" */
        justify-content: flex-end; 
    }
    #retornarArremateContainer .ep-tabela-estilizada td[data-label="Ações"]::before {
        display: none; /* Não precisamos do rótulo "Ações" */
    }

    /* Botão com tamanho decente, sem ocupar 100% */
    #retornarArremateContainer .ep-tabela-estilizada .ep-btn {
        padding: 8px 18px;
        font-size: 0.9rem;
        flex-shrink: 0; /* Impede que o botão seja espremido */
    }

     #retornarArremateContainer .ep-tabela-estilizada {
        min-width: 100%; /* Reseta a largura mínima para ocupar apenas o espaço disponível */
    }
}

@media (max-width: 480px) { /* Smartphones médios e menores */
    .ep-container-principal {
        padding: 12px; /* Um pouco menos de padding */
    }

    .ep-botoes-cabecalho .ep-btn span {
        display: none; /* Esconde o texto "Histórico Geral" */
    }
    .ep-botoes-cabecalho .ep-btn {
        border-radius: 50%;
        width: 44px;
        height: 44px;
        padding: 0;
        font-size: 1.1rem;
    }

    .ep-section-description {
        font-size: 1rem;
    }

    .ep-form-estilizado .ep-form-grupo {
        display: block;
        justify-items: center;
    }
    
    .ep-mini-table {
        width: 90%;
    }

    #kitErrorMessageNova.ep-error-message {
        width: 80%;
        justify-self: center;
        font-size: 0.9rem;
    }

    .ep-input-qte-embalar-produto {
        width: 70%;
        text-align: center;
        font-size: 1rem;
    }

    .ep-input-embalar-produto {
        width: 70px;
        padding: 15px 15px;
    }

    .container-ep {
        padding: 15px;
    }

    .ep-titulo-secao {
        font-size: 1.2rem; /* Títulos de seção menores */
    }
    .ep-card {
        padding: 15px; /* Padding dos cards principais */
    }
    .ep-input, .ep-select, .ep-textarea {
        font-size: 0.9rem; /* Inputs um pouco menores */
        padding: 9px 12px;
        width: 70%;
    }
    .ep-btn {
        font-size: 0.9rem; /* Botões um pouco menores */
        padding: 9px 16px;
    }
    .ep-input-busca {
        font-size: 0.9rem;
    }

    /* Cards de embalagem (lista) */
    .ep-embalagem-card-container {
        grid-template-columns: 1fr !important;  /* Uma coluna em telas bem pequenas */
    }

    .ep-qtd-disponivel-destaque span {
        font-size: 0.85rem;
    }
    .ep-qtd-disponivel-destaque strong {
        font-size: 1.3rem; /* Quantidade em destaque */
    }
    .ep-tab-btn {
        padding: 8px 10px; /* Abas menores */
        font-size: 0.8rem;
    }
    .ep-form-estilizado label {
        font-size: 0.85rem; /* Labels menores nos formulários internos */
    }

    /* Tabela de composição do kit (mini-table) */
    .ep-mini-table th, .ep-mini-table td {
        padding: 6px 8px;
        font-size: 0.8rem;
    }
    #kitTableBodyNova .op-input.readonly, /* Seletor para o input da qtd disponível no kit */
    .ep-kit-componente-disponivel-input { /* Se estiver usando a classe específica */
        font-size: 0.8rem !important; /* Força o tamanho aqui */
        width: 50px !important; /* Largura menor */
    }

    #embalarDetalheView .ep-tabs .ep-tab-btn {
        font-size: 0.9rem
   }

   /* header da view de detalhe */
   .ep-movimento-info h2 {
        font-size: 1.3rem;
    }
    .ep-movimento-saldo span {
        font-size: 1.6rem;
    }
    .ep-movimento-thumbnail {
        width: 90px;
        height: 90px;
    }
    /* Botão fechar já tem estilos responsivos, mas pode precisar de ajuste fino */
    #embalarDetalheView .botao-fechar {
        top: 40px;
        right: 10px;
        width: 30px;
        height: 30px;
        line-height: 30px; /* Importante para centralizar o X */
        font-size: 0.9rem;
    }

    /* Popup de mensagem */
    .popup-mensagem {
        width: 95%;
        padding: 15px 20px;
    }
    .popup-mensagem p {
        font-size: 0.9rem;
        margin-bottom: 15px;
    }
    .popup-mensagem button {
        padding: 8px 20px;
        font-size: 0.9rem;
    }
    /* #ABA "EMBALAR UNIDADE" - CONTEÚDO DE AÇÃO */
    .ep-acao-embalagem-container {
        padding: 15px 10px;
    }
    .ep-label-destacado {
        font-size: 1rem;
    }
    .ep-input-com-acoes {
        /* flex-direction: column; */
        gap: 8px;
        /* align-items: stretch; */
        justify-self: center;
    }
    .ep-input.ep-input-grande {
        font-size: 1.3rem;
    }
    #btnEmbalarTudoUnidade.ep-btn-secundario {
        width: 100%; /* Botão "Tudo" ocupa largura total */
        min-height: auto; /* Reseta min-height */
    }

    .ep-acoes-rapidas-qtd {
        flex-wrap: wrap; /* Permite que os botões quebrem linha */
        gap: 6px;
    }
    .ep-btn-outline-pequeno {
        padding: 5px 10px;
        font-size: 0.8rem;
    }
    .ep-btn.ep-btn-grande {
        font-size: 1rem;
        padding: 10px 20px;
    }

    /* --- Aba de Kit (simplificado) --- */
    .ep-kit-passo {
        padding-bottom: 15px;
        margin-bottom: 20px;
    }
    .ep-label-destacado, .ep-composicao-titulo {
        font-size: 1rem;
    }
    .ep-kit-imagem-preview {
        width: 80px;
        height: 80px;
    }
    .ep-tabela-wrapper.ep-tabela-composicao-kit {
        max-height: 200px; /* Reduz altura da tabela */
    }
    .ep-tabela-estilizada th, .ep-tabela-estilizada td {
        font-size: 0.7rem; /* Fonte menor na tabela */
        padding: 6px 8px;
    }
    .ep-status-componente {
        font-size: 0.7rem;
        padding: 2px 6px;
    }
    .ep-kits-montaveis-info strong {
        font-size: 1.6rem;
    }

    
    .ep-tabela-estilizada {
    min-width: 250px;
    }

    .ep-card-embalagem-react {
        grid-template-columns: auto 1fr; /* Imagem e o resto */
        grid-template-rows: auto auto; /* Linha 1: info, Linha 2: pendente */
        padding: 12px;
        gap: 4px 12px;
    }
    .ep-card-embalagem-react .card-imagem-produto {
        grid-row: 1 / 3; /* Imagem ocupa as duas linhas */
        width: 60px;
        height: 60px;
    }
    .ep-card-embalagem-react .card-info-principal {
        grid-column: 2 / 3;
        grid-row: 1 / 2;
    }
    .ep-card-embalagem-react .card-info-principal h3 {
        font-size: 1rem;
    }
    .ep-card-embalagem-react .card-bloco-pendente {
        grid-column: 2 / 3; /* Bloco pendente vai para a segunda linha */
        grid-row: 2 / 3;
        flex-direction: row;
        justify-content: space-between;
        width: 100%;
        padding: 8px 12px;
        margin-top: 8px;
        background-color: transparent;
        border-top: 1px solid var(--ep-cor-cinza-borda);
        border-radius: 0;
    }
    .ep-card-embalagem-react .card-bloco-pendente .valor {
        font-size: 1.5rem;
    }

}
/* ****** FIM BREAKPOINT 480px ****** */

@media (max-width: 414px) { /* iPhone XR e similares */
    .ep-container-principal {
        padding: 10px;
    }

    .ep-titulo-secao {
        font-size: 1.25rem; /* Reduzir mais */
    }
    .ep-card {
        padding: 12px;
    }
    .ep-input, .ep-select, .ep-textarea {
        font-size: 0.85rem; /* Fontes menores para inputs */
        padding: 8px 10px;
    }
    .ep-mini-table{
        justify-self: center;
        width: 90%;
     }

    .ep-input-qte-embalar-produto {
        width: 70%;
        font-size: 0.9rem;
        padding: 15px;
    }

    .ep-btn {
        font-size: 0.9rem; /* Botões um pouco menores */
        padding: 8px 14px;
    }
    .ep-input-busca {
        font-size: 0.9rem;
    }

    /* Cards de embalagem */
    .ep-embalagem-card-container {
        grid-template-columns: 1fr; /* Uma coluna para melhor visualização */
        gap: 12px;
    }
    .op-embalagem-card {
        padding: 15px;
    }
    .op-embalagem-card-thumbnail {
        width: 70px; /* Levemente menor */
        height: 70px;
        margin-bottom: 10px;
    }
    .op-embalagem-card-produto {
        font-size: 1rem;
    }
    .op-embalagem-card-variante {
        font-size: 0.8rem;
    }
    .op-embalagem-card-disponivel {
        font-size: 0.9rem;
    }
    .op-embalagem-card-disponivel strong {
        font-size: 1.1rem;
    }

    /* Detalhe da Embalagem */
    .ep-thumbnail-detalhe {
        
        width: 80px; /* Ajustar tamanho da imagem de detalhe */
        height: 80px;
    }

     .botao-fechar {
        width: 30px;
        height: 30px;
        line-height: 30px;
        font-size: 0.9rem;
    }

    .ep-embalar-title-group .op-titulo-secao { /* Se estiver usando op-titulo-secao aqui */
        font-size: 1.2rem;
    }
    #embalagemDetalheTitulo { /* Se for um ID específico */
        font-size: 1.3rem;
    }
    #embalagemDetalheSubTitle {
        font-size: 0.9rem;
    }

    .ep-qtd-disponivel-destaque span {
        font-size: 0.9rem;
    }
    .ep-qtd-disponivel-destaque strong {
        font-size: 1.4rem; /* Ajustar tamanho da fonte da quantidade */
    }
    .ep-tab-btn {
        padding: 8px 10px; /* Abas menores */
        font-size: 0.85rem;
    }

    /* Popup de mensagem */
    .popup-mensagem {
        width: 95%;
        padding: 15px 20px;
    }
    .popup-mensagem p {
        font-size: 0.9rem;
        margin-bottom: 15px;
    }
    .popup-mensagem button {
        padding: 8px 20px;
        font-size: 0.9rem;
    }

    /* 
      Reduz o padding horizontal do container principal da página, 
      dando mais espaço para o card interno.
    */
    .container-ep {
        padding:15px;
    }

    /* 
      Reduz o padding horizontal do card principal da seção,
      dando mais espaço para o painel cinza de filtros/cards.
    */
    #embalagemListViewNova.ep-card {
        padding-left: 10px;
        padding-right: 10px;
    }

    /* 
       Força a grade de cards a ter apenas uma coluna, 
       evitando que eles tentem se espremer lado a lado.
    */
    .painel-cards-coluna .gs-container-cards {
        grid-template-columns: 1fr;
    }
}
